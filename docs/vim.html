---

title: vim


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/craft/vim.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/craft/vim.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Basics">Basics<a class="anchor-link" href="#Basics"> </a></h2><h3 id="Command-line">Command-line<a class="anchor-link" href="#Command-line"> </a></h3><ul>
<li><p><code>:q</code> quit (close window)</p>
</li>
<li><p><code>:w</code> save ("write")</p>
</li>
<li><p><code>:wq</code> save and quit</p>
</li>
<li><p><code>:e {name of file}</code> open file for editing</p>
</li>
<li><p><code>:ls</code> show open buffers</p>
</li>
<li><p><code>:bp</code> <code>:bn</code> switch between buffers</p>
</li>
<li><p><code>:help {topic}</code> open help</p>
<ul>
<li><p><code>:help :w</code> opens help for the <code>:w</code> command</p>
</li>
<li><p><code>:help w</code> opens help for the <code>w</code> movement</p>
</li>
</ul>
</li>
</ul>
<h3 id="Movement">Movement<a class="anchor-link" href="#Movement"> </a></h3><ul>
<li><p>Basic movement: <code>hjkl</code> (left, down, up, right)</p>
</li>
<li><p>Words: <code>w</code> (next word), <code>b</code> (beginning of word), <code>e</code> (end of word)</p>
</li>
<li><p>Lines: <code>0</code> (beginning of line), <code>^</code> (first non-blank character), <code>$</code> (end of line)</p>
<ul>
<li><p>When a line is wrapped, it is displayed in multiple visual lines.</p>
<p>Motions become confusing with display lines as they constitute a vim line object. By prepending motion keys with <code>g</code>, we can instead modify motion commands to take display lines into accounts. For example, <code>gk</code> moves one display line upward. <code>g0</code> goes to the beginning of the display line, instead of beginning of vim line object.</p>
</li>
</ul>
</li>
<li><p>Screen: <code>H</code> (top of screen), <code>M</code> (middle of screen), <code>L</code> (bottom of screen)</p>
</li>
<li><p>Scroll with cursor: <code>&lt;C-u&gt;</code> (up), <code>&lt;C-d&gt;</code> (down)</p>
</li>
<li><p>Scroll only screen not cursor: <code>&lt;C-y&gt;</code> (up), <code>&lt;C-e&gt;</code> (down)</p>
</li>
<li><p><code>zz</code> to center the cursor vertically on your screen, e.g. 250gzz</p>
</li>
<li><p>File: <code>gg</code> (beginning of file), <code>G</code> (end of file)</p>
</li>
<li><p>Line numbers: <code>:{number}&lt;CR&gt;</code> or <code>{number}G</code> (line {number})</p>
</li>
<li><p>Jump to matching character such as (), [], {} by <code>%</code></p>
</li>
<li><p>Find: <code>f{character}</code>, <code>t{character}</code>, <code>F{character}</code>, <code>T{character}</code></p>
<ul>
<li><p>find/to forward/backward {character} on the current line</p>
</li>
<li><p><code>,</code> / <code>;</code> for navigating matches</p>
</li>
</ul>
</li>
<li><p>Search: <code>/{regex}</code>, <code>n</code> / <code>N</code> for navigating matches</p>
<ul>
<li><p><code>*</code> find next occurrence of word under cursor</p>
</li>
<li><p><code>#</code> find previous occurrence of word under cursor</p>
</li>
<li><p><code>gn</code> / <code>gN</code> also visually select matches, which is handy for rerunnin commands with <code>.</code></p>
</li>
</ul>
</li>
<li><p>Go back/forward with <code>&lt;C-o&gt;</code>/<code>&lt;C-i&gt;</code></p>
</li>
<li><p>CamelCaseMotion</p>
<ul>
<li><p><code>&lt;leader&gt;{w|b|e|ge}</code></p>
</li>
<li><p><code>ci&lt;leader&gt;w</code></p>
</li>
</ul>
</li>
<li><p>Folding</p>
<ul>
<li><p><code>zo</code> open fold, <code>zO</code> open all folds on the cursor</p>
</li>
<li><p><code>zc</code> close fold, <code>zC</code> close all folds on the cursor</p>
</li>
<li><p><code>za</code> toggle fold, <code>zA</code> toggle all folds on the cursor</p>
</li>
<li><p><code>zr</code> open one more level of fold, <code>zR</code> open all folds independent of the cursor</p>
</li>
<li><p><code>zm</code> close one more level of fold, <code>zM</code> close all folds independent of the cursor</p>
</li>
</ul>
</li>
<li><p>Marks</p>
<ul>
<li><p><code>m{lowercase character}</code> to create a local mark</p>
</li>
<li><p><code>m{uppercase character}</code> to create a global mark</p>
</li>
<li><p>`{char} jump to mark</p>
</li>
<li><p>Quickly come back <code>mm</code> and `m</p>
</li>
</ul>
</li>
</ul>
<h3 id="Counts">Counts<a class="anchor-link" href="#Counts"> </a></h3><ul>
<li><p><code>3w</code> move 3 words forward</p>
</li>
<li><p><code>5j</code> move 5 lines down</p>
</li>
<li><p><code>7dw</code> delete 7 words</p>
</li>
</ul>
<h3 id="Visual-mode">Visual mode<a class="anchor-link" href="#Visual-mode"> </a></h3><ul>
<li><p>Visual: <code>v</code></p>
</li>
<li><p>Visual line: <code>V</code></p>
</li>
<li><p>Visual block (multi cursor): <code>^v</code></p>
<ul>
<li>it does not show the command on all lines but applies when escaped</li>
</ul>
</li>
<li><p>Toggle cursor position to either ends of visual selection with <code>o</code></p>
</li>
</ul>
<h3 id="Edits">Edits<a class="anchor-link" href="#Edits"> </a></h3><ul>
<li><p>Insert mode</p>
<ul>
<li><p><code>i</code> puts cursor before the current place</p>
</li>
<li><p><code>I</code> puts cursor at the beginning of current line</p>
</li>
<li><p><code>a</code> puts cursor after the current place</p>
</li>
<li><p><code>A</code> puts cursor at the end of current line</p>
</li>
</ul>
</li>
<li><p><code>o</code> / <code>O</code> insert line below / above</p>
</li>
<li><p><code>d{motion}</code> delete {motion}</p>
<ul>
<li><p><code>dw</code> is delete word</p>
</li>
<li><p><code>d$</code> is delete to end of line</p>
</li>
<li><p><code>d0</code> is delete to beginning of line</p>
</li>
<li><p>deleted text put into unnamed register <code>"</code></p>
</li>
<li><p><code>"_d{motion}</code> delete into black hole so that it does not change unnamed register</p>
</li>
</ul>
</li>
<li><p><code>D</code> delete rest of the line (equal to <code>d$</code>)</p>
</li>
<li><p><code>c{motion}</code> change {motion}</p>
<ul>
<li><code>cw</code> is change word</li>
</ul>
</li>
<li><p><code>C</code> change rest of the line (equal to <code>Di</code>)</p>
</li>
<li><p><code>&gt;{motion}</code> indent</p>
</li>
<li><p><code>&lt;{motion}</code> dedent</p>
</li>
<li><p><code>x</code> delete character (equal do <code>dl</code>)</p>
</li>
<li><p><code>r</code> replace one character</p>
</li>
<li><p><code>s</code> substitute character (equal to <code>xi</code>)</p>
</li>
<li><p><code>S</code> substitute line (equal to <code>ddO</code> or <code>0C</code>)</p>
</li>
<li><p>Visual mode + manipulation</p>
<ul>
<li>select text, <code>d</code> to delete it or <code>c</code> to change it</li>
</ul>
</li>
<li><p><code>u</code> to undo, <code>&lt;C-r&gt;</code> to redo</p>
</li>
<li><p><code>y</code> to copy / "yank" (some other commands like <code>d</code> also copy)</p>
<ul>
<li><p>all yanked texts are saved into numbered registers(0,1,2...), like a queue.</p>
<p><code>:reg</code> list all registers.</p>
</li>
<li><p>copy to a register by <code>"{character}y</code> and then paste it by <code>"{character}p</code></p>
<ul>
<li><p><code>"*y</code> copy to system clipboard</p>
</li>
<li><p><code>"*p</code> paste from system clipboard</p>
</li>
<li><p>copy content of register <code>a</code> to register <code>b</code></p>
<div class="highlight"><pre><span></span><span class="p">:</span><span class="k">let</span> @<span class="k">b</span><span class="p">=</span>@<span class="k">a</span>
</pre></div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Paste</p>
<ul>
<li><p><code>p</code> to paste in normal mode</p>
</li>
<li><p><code>&lt;C-r&gt; &lt;register&gt;</code> to paste in insert mode</p>
<ul>
<li><code>&lt;C-r&gt; "</code> to paste unnamed register in insert mode </li>
</ul>
</li>
<li><p>after pasting over a visual selection, that visual selection is put into unnamed register</p>
</li>
</ul>
</li>
<li><p><code>~</code> flips the case of a character</p>
</li>
<li><p><code>gu{motion}</code> lowercase <code>gU{motion}</code> uppercase</p>
</li>
<li><p>Text objects</p>
<ul>
<li><p><code>aw</code> word including white space after</p>
</li>
<li><p><code>iw</code> inner word</p>
</li>
<li><p><code>it</code> inner tag</p>
</li>
<li><p><code>i"</code> inner quotes</p>
</li>
<li><p><code>ip</code> inner paragraphs</p>
</li>
<li><p><code>as</code> as sentence</p>
</li>
<li><p><code>aa</code> as argument</p>
</li>
<li><p><code>ia</code> inner argument</p>
</li>
</ul>
</li>
<li><p>Delete until next occurence including new lines <code>d/{regex} + enter</code></p>
</li>
<li><p><code>&lt;C-A&gt;</code> increment <code>&lt;C-X&gt;</code> decrement</p>
</li>
</ul>
<h3 id="Modifiers">Modifiers<a class="anchor-link" href="#Modifiers"> </a></h3><ul>
<li><p><code>ci(</code> change the contents inside the current pair of parentheses</p>
</li>
<li><p><code>ci[</code> change the contents inside the current pair of square brackets</p>
</li>
<li><p><code>da'</code> delete a single-quoted string, including the surrounding single quotes</p>
</li>
</ul>
<h3 id="Command-mode">Command mode<a class="anchor-link" href="#Command-mode"> </a></h3><p>syntax <code>:&lt;range&gt;&lt;command&gt;</code></p>
<ul>
<li><p>To substitute new for the first old in a line type</p>
</li>
<li><p>current line</p>
<ul>
<li><p><code>:s/old/new</code> first occurrence of <code>old</code> in current line</p>
</li>
<li><p><code>:s/old/new/g</code> all occurrences of <code>old</code> in current line</p>
</li>
<li><p><code>:.s/old/new/g</code></p>
</li>
</ul>
</li>
<li><p>last line <code>$</code></p>
</li>
<li><p>a specific line <code>:21s/old/new/g</code></p>
</li>
<li><p><code>%</code> entire file, e.g. <code>:%s/old/new/g</code></p>
</li>
<li><p>to ask for confirmation each time add <code>c</code></p>
<ul>
<li><code>:%s/old/new/gc</code></li>
</ul>
</li>
<li><p><code>11,15</code> from line 11 to 15 both inclusive, e.g. <code>:11,15s/old/new/g</code></p>
</li>
<li><p><code>.,.+5</code> from current line to 5 lines after</p>
</li>
<li><p>delete all lines that matches pattern <code>:g/pattern/d</code></p>
</li>
<li><p>delete all lines that does not match pattern</p>
<ul>
<li><p><code>:!g/pattern/d</code></p>
</li>
<li><p><code>:v/pattern/d</code></p>
</li>
</ul>
</li>
<li><p>put a new line after every line, i.e. double space lines, <code>:g/^/pu =\"\n\"</code></p>
</li>
<li><p>delete every empty line, <code>:g/^\s*$/d</code></p>
</li>
<li><p>reverse lines, <code>:g/^/m0</code> move every line to the first line</p>
</li>
<li><p>execute a command on a range  <code>:'&lt;,'&gt;normal A;</code></p>
<ul>
<li>puts <code>;</code> to the end of each line</li>
</ul>
</li>
<li><p>execute a macro on range <code>:'&lt;,'&gt;normal @a</code></p>
</li>
<li><p><code>:6t.</code> copy line 6 to current line</p>
</li>
<li><p><code>:{range}m$</code> move range to the end of the file</p>
</li>
<li><p><code>@:</code> repeat last Ex command</p>
</li>
<li><p><code>&lt;C-r&gt;&lt;C-w&gt;</code> copies the word under the cursor to the command-line prompt</p>
</li>
<li><p>command window (cmdwin) is useful for finding previous commands and searches as it allows editing with vim</p>
<ul>
<li><p><code>q:</code> in normal mode and <code>&lt;C-f&gt;</code> in command mode to open command history</p>
</li>
<li><p><code>q/</code> or <code>q?</code> for search history</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Macros">Macros<a class="anchor-link" href="#Macros"> </a></h3><ul>
<li><p><code>q{lowercase character}</code> to start recording a macro in register</p>
</li>
<li><p><code>q{uppercase character}</code> to append an existing macro in register</p>
</li>
<li><p><code>q</code> to stop recording</p>
</li>
<li><p><code>@{character}</code> replays the macro</p>
</li>
<li><p>Macro execution stops on error</p>
</li>
<li><p><code>{number}@{character}</code> executes a macro {number} times</p>
</li>
<li><p>Macros can be recursive</p>
<ul>
<li><p>first clear the macro with <code>q{character}q</code></p>
</li>
<li><p>record the macro, with <code>@{character}</code> to invoke the macro recursively</p>
<p>(will be a no-op until recording is complete)</p>
</li>
</ul>
</li>
<li><p>Example: convert xml to json (<a href="/2020/files/example-data.xml">file</a>)</p>
<ul>
<li><p>Array of objects with keys "name" / "email"</p>
</li>
<li><p>Use a Python program?</p>
</li>
<li><p>Use sed / regexes</p>
<ul>
<li><p><code>g/people/d</code></p>
</li>
<li><p><code>%s/&lt;person&gt;/{/g</code></p>
</li>
<li><p><code>%s/&lt;name&gt;\(.*\)&lt;\/name&gt;/"name": "\1",/g</code></p>
</li>
<li><p>...</p>
</li>
</ul>
</li>
<li><p>Vim commands / macros</p>
<ul>
<li><p><code>Gdd</code>, <code>ggdd</code> delete first and last lines</p>
</li>
<li><p>Macro to format a single element (register <code>e</code>)</p>
<ul>
<li><p>Go to line with <code>&lt;name&gt;</code></p>
</li>
<li><p><code>qe^r"f&gt;s": "&lt;ESC&gt;f&lt;C"&lt;ESC&gt;q</code></p>
</li>
</ul>
</li>
<li><p>Macro to format a person</p>
<ul>
<li><p>Go to line with <code>&lt;person&gt;</code></p>
</li>
<li><p><code>qpS{&lt;ESC&gt;j@eA,&lt;ESC&gt;j@ejS},&lt;ESC&gt;q</code></p>
</li>
</ul>
</li>
<li><p>Macro to format a person and go to the next person</p>
<ul>
<li><p>Go to line with <code>&lt;person&gt;</code></p>
</li>
<li><p><code>qq@pjq</code></p>
</li>
</ul>
</li>
<li><p>Execute macro until end of file</p>
<ul>
<li><code>999@q</code></li>
</ul>
</li>
<li><p>Manually remove last <code>,</code> and add <code>[</code> and <code>]</code> delimiters</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Plugins">Plugins<a class="anchor-link" href="#Plugins"> </a></h2><p>With the plugin manager, <a href="https://github.com/junegunn/vim-plug">vim-plug</a>, we can easily add a new plugin to <code>.vimrc</code>.</p>
<p>Don't forget to reload <code>.vimrc</code> and <code>:PlugInstall</code> to install plugins.</p>
<h3 id="vim-surround">vim-surround<a class="anchor-link" href="#vim-surround"> </a></h3><p><a href="https://github.com/tpope/vim-surround/blob/master/doc/surround.txt">Docs and examples</a></p>
<ul>
<li><p><code>ysiw[</code> surround word with <code>[]</code></p>
</li>
<li><p>Wrap the entire line in parentheses with <code>yss)</code></p>
</li>
<li><p>whee! -&gt; <code>v4lS'</code> -&gt; 'whee!'</p>
</li>
<li><p>"hello" -&gt; ysWfprint<cr> -&gt; print("hello")</p>
</li>
<li><p>A custom surround command is defined for markdown which surrounds visual selection with markdown code block of prompted language.</p>
<div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">b</span>:surround_99 <span class="p">=</span> <span class="s2">&quot;```\1lang: \1\r```&quot;</span>
</pre></div>
<ul>
<li><p>pwd -&gt; <code>VScbash&lt;enter&gt;</code> -&gt;</p>
<p>```sh
  pwd
  ```</p>
</li>
</ul>
</li>
</ul>
<h3 id="vim-commentary">vim-commentary<a class="anchor-link" href="#vim-commentary"> </a></h3><ul>
<li><p><code>gc{motion}</code> to toggle comment out</p>
</li>
<li><p><code>gcc</code> to toggle line comment out</p>
</li>
</ul>
<hr>
<h2 id="Advanced-Vim">Advanced Vim<a class="anchor-link" href="#Advanced-Vim"> </a></h2><h3 id="Search-and-replace">Search and replace<a class="anchor-link" href="#Search-and-replace"> </a></h3><p><code>:s</code> (substitute) command (<a href="http://vim.wikia.com/wiki/Search_and_replace">documentation</a>).</p>
<ul>
<li><p><code>:%s/foo/bar/g</code></p>
<ul>
<li>replace foo with bar globally in file</li>
</ul>
</li>
<li><p><code>:%s/\[.*\](\(.*\))/\1/g</code></p>
<ul>
<li>replace named Markdown links with plain URLs</li>
</ul>
</li>
</ul>
<h3 id="Multiple-files-and-viewports">Multiple files and viewports<a class="anchor-link" href="#Multiple-files-and-viewports"> </a></h3><h4 id="File-exploration">File exploration<a class="anchor-link" href="#File-exploration"> </a></h4><p>Vim displays buffers in windows and tabs.</p>
<ul>
<li><p><code>:Explore</code> or <code>:E</code> opens file explorer</p>
</li>
<li><p>fzf.vim commands</p>
<ul>
<li><p><code>:Files</code> lists files in cwd</p>
</li>
<li><p><code>:Buffer</code> lists current open buffers</p>
</li>
<li><p><code>:Windows</code> lists current open windows</p>
</li>
<li><p><code>&lt;C-T&gt;</code> to open the selected file in new tab</p>
</li>
<li><p><code>&lt;C-X&gt;</code> to open the selected file in horizontal split</p>
</li>
<li><p><code>&lt;C-V&gt;</code> to open the selected file in vertical split</p>
</li>
<li><p>My fzf.vim shortcuts</p>
<ul>
<li><p><code>&lt;leader&gt;f :Buffers&lt;CR&gt;</code></p>
</li>
<li><p><code>&lt;leader&gt;t :Files&lt;CR&gt;</code></p>
</li>
<li><p><code>&lt;leader&gt;rg :Rg&lt;CR&gt;</code> ripgrep, i.e. search keyword in files</p>
</li>
<li><p><code>&lt;leader&gt;l :BLines&lt;CR&gt;</code> show lines matching search term, more useful than <code>/</code></p>
</li>
<li><p><code>&lt;leader&gt;m :Marks&lt;CR&gt;</code></p>
</li>
<li><p><code>&lt;leader&gt;h :History&lt;CR&gt;</code> file history</p>
</li>
<li><p><code>&lt;leader&gt;: :History:&lt;CR&gt;</code> command history</p>
</li>
<li><p><code>&lt;leader&gt;/ :History/&lt;CR&gt;</code> search history</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Tabs">Tabs<a class="anchor-link" href="#Tabs"> </a></h4><p>A tab can have multiple windows.</p>
<ul>
<li><p><code>tabnew filename</code> opens a new tab</p>
</li>
<li><p><code>gt</code> to switch between tabs</p>
</li>
<li><p><code>{number}gt</code> goes to numbered tab. Numbering starts from 1.</p>
</li>
<li><p><code>:q</code> to close current tab</p>
</li>
</ul>
<h4 id="Windows-(Splits)">Windows (Splits)<a class="anchor-link" href="#Windows-(Splits)"> </a></h4><ul>
<li><p><code>:sp</code> / <code>:vsp</code> to split windows</p>
</li>
<li><p><code>&lt;C-w&gt;[hjkl]</code> to navigate between windows</p>
</li>
<li><p><code>&lt;C-w&gt;q</code> to close window. Be careful <code>q</code> closes the whole tab.</p>
</li>
<li><p>We can have multiple views of the same buffer with windows.</p>
</li>
</ul>
<p>Useful for viewing different parts of a file.</p>
<h3 id="Terminal-in-vim">Terminal in vim<a class="anchor-link" href="#Terminal-in-vim"> </a></h3><ul>
<li><p><code>:terminal</code> or <code>:ter</code> to open a terminal</p>
<ul>
<li><p><code>:below vert terminal</code> to open a terminal at right split</p>
</li>
<li><p><code>:ter ++curwin</code> to open in current window without splitting</p>
</li>
</ul>
</li>
<li><p><code>&lt;C-w&gt;N</code> to enter to Normal mode</p>
</li>
<li><p><code>&lt;C-w&gt;:</code> to enter to Command mode</p>
</li>
<li><p><code>i</code> to enter Insert mode</p>
</li>
<li><p><code>:sp</code> or <code>:vsp</code> to split terminal window in Normal mode</p>
</li>
<li><p><code>&lt;C-w&gt;c</code> to close window</p>
</li>
<li><p><code>&lt;C-d&gt;</code> to quit window</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Best-practices">Best practices<a class="anchor-link" href="#Best-practices"> </a></h2><h4 id="Vim-Can-Save-You-Hours-Of-Work">Vim Can Save You Hours Of Work<a class="anchor-link" href="#Vim-Can-Save-You-Hours-Of-Work"> </a></h4><p><a href="https://www.youtube.com/watch?v=bshMXXX40_4">Video</a></p>
<ul>
<li><p><code>ddp</code> to swap lines</p>
</li>
<li><p><code>/keyword/m$</code> to move line matches keyword to last</p>
</li>
<li><p><code>/keyword/+1m-2</code> to move the next line of the line matches keyword to two lines up</p>
</li>
<li><p><code>:10,20&gt;</code> indent lines between 10 and 20</p>
</li>
<li><p><code>:10,20 norm A"</code> insert " to every the end of lines between 10 and 20</p>
</li>
<li><p><code>:ab bds Baris Deniz Saglam</code> define abbreviation</p>
<ul>
<li>add <code>^</code> to end of word to prevent expansion</li>
</ul>
</li>
<li><p><code>:w !sudo tee %</code> write to current file when not have permission</p>
</li>
</ul>

</div>
</div>
</div>
</div>
 

