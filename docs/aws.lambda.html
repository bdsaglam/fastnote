---

title: AWS Lambda


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/aws/aws.lambda.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/aws/aws.lambda.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SAM">SAM<a class="anchor-link" href="#SAM"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Initialize new project</p>
<div class="highlight"><pre><span></span>sam init
</pre></div>
<p>Build the application</p>
<div class="highlight"><pre><span></span>sam build
</pre></div>
<p>Deploy your application</p>
<div class="highlight"><pre><span></span>sam deploy --guided
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Testing">Testing<a class="anchor-link" href="#Testing"> </a></h3><h4 id="Automated-integration-test">Automated integration test<a class="anchor-link" href="#Automated-integration-test"> </a></h4><p>Start a local Lambda endpoint when running integration tests locally or in CI stage.</p>
<div class="highlight"><pre><span></span>sam <span class="nb">local</span> start-lambda
</pre></div>
<p>Then, in integration tests, use Lambda endpoint</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">boto3</span>
<span class="kn">import</span> <span class="nn">botocore</span>

<span class="c1"># Set &quot;running_locally&quot; flag if you are running the integration test locally</span>
<span class="n">running_locally</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">if</span> <span class="n">running_locally</span><span class="p">:</span>
    <span class="c1"># Create Lambda SDK client to connect to appropriate Lambda endpoint</span>
    <span class="n">lambda_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span>
        <span class="n">region_name</span><span class="o">=</span><span class="s2">&quot;us-west-2&quot;</span><span class="p">,</span>
        <span class="n">endpoint_url</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:3001&quot;</span><span class="p">,</span>
        <span class="n">use_ssl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="n">botocore</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">Config</span><span class="p">(</span>
            <span class="n">signature_version</span><span class="o">=</span><span class="n">botocore</span><span class="o">.</span><span class="n">UNSIGNED</span><span class="p">,</span>
            <span class="n">read_timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">retries</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;max_attempts&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">lambda_client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">&#39;lambda&#39;</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">lambda_client</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">FunctionName</span><span class="o">=</span><span class="s2">&quot;HelloWorldFunction&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="s2">&quot;Hello World&quot;</span>
</pre></div>
<h4 id="Invoke-lambda-directly">Invoke lambda directly<a class="anchor-link" href="#Invoke-lambda-directly"> </a></h4>
<pre><code>sam local invoke "HelloWorldFunction" -e events/event.json</code></pre>
<h4 id="Use-local-API-Gateway">Use local API Gateway<a class="anchor-link" href="#Use-local-API-Gateway"> </a></h4><p>Start the API</p>

<pre><code>sam local start-api</code></pre>
<p>Then, send a request</p>

<pre><code>curl http://127.0.0.1:3000/hello</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Lambda-Powertools-for-Python">Lambda Powertools for Python<a class="anchor-link" href="#Lambda-Powertools-for-Python"> </a></h2><p><a href="https://awslabs.github.io/aws-lambda-powertools-python/latest">https://awslabs.github.io/aws-lambda-powertools-python/latest</a></p>

</div>
</div>
</div>
</div>
 

